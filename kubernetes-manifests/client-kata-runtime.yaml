apiVersion: v1
kind: Pod
metadata:
  name: ping-pong-client
  labels:
    name: ping-pong
spec:
  runtimeClassName: kata-runtime
  affinity:
    podAntiAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          - labelSelector:
              matchExpressions:
                - key: name
                  operator: In
                  values:
                    - ping-pong
            topologyKey: kubernetes.io/hostname
  restartPolicy: OnFailure
  containers:
  - name: ping-pong-client
    image: docker.io/sdeoras/ping-pong-client:85e47e08-clean
    imagePullPolicy: IfNotPresent
    command:
      - /ping-pong-client
    args:
      - run
      - --host
      - ping-pong-server-service
      - --port
      - "5001"
    resources:
      limits:
        memory: "128Mi"
        cpu: "500m"
